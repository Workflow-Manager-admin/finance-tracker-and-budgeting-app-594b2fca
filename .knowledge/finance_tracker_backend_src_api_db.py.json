{"is_source_file": true, "format": "Python", "description": "This file is a Python module defining database setup, ORM models, and a database session dependency for a finance tracking backend. It includes SQLAlchemy configurations, environment variable handling for database URL, ORM models for User and Transaction, and a session generator function for dependency injection.", "external_files": ["os", "sqlalchemy", "datetime"], "external_methods": ["os.getenv", "create_engine", "sessionmaker", "declarative_base", "datetime.datetime.utcnow"], "published": ["get_db"], "classes": [{"name": "User", "description": "ORM model representing users, including email, hashed password, creation timestamp, and relationship to transactions."}, {"name": "Transaction", "description": "ORM model representing financial transactions, linked to a user, including amount, category, description, date, and type."}], "methods": [{"name": "Generator[Session,None,None] get_db()", "description": "Generator function providing database sessions for use in API dependencies.", "scope": "", "scopeKind": ""}], "calls": ["os.getenv", "create_engine", "sessionmaker", "declarative_base", "SessionLocal()", "datetime.datetime.utcnow"], "search-terms": ["SQLAlchemy ORM models", "User and Transaction classes", "get_db session generator", "database connection setup", "SQLite engine configuration", "FastAPI dependency"], "state": 2, "file_id": 15, "knowledge_revision": 44, "git_revision": "", "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_URL", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^DB_URL = os.getenv(\"DB_URL\") or \"sqlite:\\/\\/\\/.\\/finance_tracker.db\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Transaction", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^class Transaction(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^class User(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"transactions\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    amount = Column(Float, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    category = Column(String(100), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    created_at = Column(DateTime, default=datetime.datetime.utcnow)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "date", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    date = Column(DateTime, default=datetime.datetime.utcnow, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    description = Column(String(500))$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    email = Column(String(255), unique=True, nullable=False, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^engine: Engine = create_engine(DB_URL, connect_args={\"check_same_thread\": False})$/", "language": "Python", "typeref": "typename:Engine", "kind": "variable"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^def get_db() -> Generator[Session, None, None]:$/", "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "hashed_password", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    hashed_password = Column(String(255), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True)$/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "owner", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    owner = relationship(\"User\", back_populates=\"transactions\")$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "transactions", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    transactions = relationship(\"Transaction\", back_populates=\"owner\", cascade=\"all, delete-orph/", "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    type = Column(String(50), nullable=False)  # e.g., \"income\" or \"expense\"$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/src/api/db.py", "pattern": "/^    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)$/", "language": "Python", "kind": "variable", "scope": "Transaction", "scopeKind": "class"}], "hash": "ff73d2741f12460cf44ca643efa9c78a", "format-version": 4, "code-base-name": "finance_tracker_backend", "filename": "finance_tracker_backend/src/api/db.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_URL = os.getenv(\"DB_URL\") or \"sqlite:\\/\\/\\/.\\/finance_tracker.db\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"transactions\"", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "amount = Column(Float, nullable=False)", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "category = Column(String(100), nullable=False)", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = Column(DateTime, default=datetime.datetime.utcnow)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "date = Column(DateTime, default=datetime.datetime.utcnow, nullable=False)", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "description = Column(String(500))", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "email = Column(String(255), unique=True, nullable=False, index=True)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Engine engine", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "hashed_password = Column(String(255), nullable=False)", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True)", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "owner = relationship(\"User\", back_populates=\"transactions\")", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "transactions = relationship(\"Transaction\", back_populates=\"owner\", cascade=\"all, delete-orph/", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "type = Column(String(50), nullable=False)  # e.g., \"income\" or \"expense\"", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}, {"name": "user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)", "scope": "Transaction", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"44": ""}]}