{"is_source_file": true, "format": "Python", "description": "This is a test module for the FastAPI backend of a finance tracker application. It contains test cases for user registration, login, transaction CRUD operations, authorization, and analytics, utilizing pytest and FastAPI's TestClient. The tests also involve environment setup with monkeypatching for database and JWT configuration.", "external_files": ["src/api/main", "src/api/db"], "external_methods": ["monkeypatch.setenv", "Base.metadata.drop_all", "Base.metadata.create_all", "app"], "published": [], "classes": [], "methods": [{"name": "test_db_env(monkeypatch)", "description": "Fixture that sets environment variables for database URL and JWT secret for test isolation.", "scope": "", "scopeKind": ""}, {"name": "clear_db()", "description": "Drops and recreates all tables to ensure test isolation.", "scope": "", "scopeKind": ""}, {"name": "run_around_tests()", "description": "Fixture that clears database before and after each test.", "scope": "", "scopeKind": ""}, {"name": "test_health_check()", "description": "Tests the health check endpoint returning status 'ok'.", "scope": "", "scopeKind": ""}, {"name": "register_user(email=\"testuser@example.com\", password=\"StrongPassword!9\")", "description": "Helper to register a new user with given email and password.", "scope": "", "scopeKind": ""}, {"name": "login_user(email=\"testuser@example.com\", password=\"StrongPassword!9\")", "description": "Helper to log in a user, returning the response object.", "scope": "", "scopeKind": ""}, {"name": "get_jwt_token(email=\"testuser@example.com\", password=\"StrongPassword!9\")", "description": "Registers and logs in a user to retrieve an access token.", "scope": "", "scopeKind": ""}, {"name": "test_register_success()", "description": "Tests successful user registration.", "scope": "", "scopeKind": ""}, {"name": "test_register_duplicate_email()", "description": "Tests registration with an email that is already registered to produce an error.", "scope": "", "scopeKind": ""}, {"name": "test_login_success()", "description": "Tests successful user login and token retrieval.", "scope": "", "scopeKind": ""}, {"name": "test_login_invalid_password()", "description": "Tests login with incorrect password.", "scope": "", "scopeKind": ""}, {"name": "test_login_nonexistent_email()", "description": "Tests login with a non-existent email.", "scope": "", "scopeKind": ""}, {"name": "test_transactions_crud_lifecycle()", "description": "Full cycle test for creating, retrieving, updating, and deleting a transaction.", "scope": "", "scopeKind": ""}, {"name": "test_transaction_delete_missing()", "description": "Attempts to delete a non-existent transaction, expecting a 404.", "scope": "", "scopeKind": ""}, {"name": "test_transaction_update_missing()", "description": "Attempts to update a non-existent transaction, expecting a 404.", "scope": "", "scopeKind": ""}, {"name": "test_protected_endpoint_requires_jwt()", "description": "Ensures endpoints are protected and return error without valid JWT.", "scope": "", "scopeKind": ""}, {"name": "test_analytics_summary()", "description": "Tests the analytics summary endpoint returning total income, expense, and per category sums.", "scope": "", "scopeKind": ""}, {"name": "test_jwt_required_all_transactions_endpoints(route)", "description": "Parameterizes testing of multiple endpoints to ensure they require JWT.", "scope": "", "scopeKind": ""}, {"name": "test_docs_usage()", "description": "Tests access to the documentation or usage endpoint.", "scope": "", "scopeKind": ""}, {"name": "test_validation_error_reporting()", "description": "Tests validation and error reporting when creating a transaction with missing fields.", "scope": "", "scopeKind": ""}], "calls": ["client.get", "client.post", "client.put", "client.delete", "pytest.fixture", "Base.metadata.drop_all", "Base.metadata.create_all", "monkeypatch.setenv", "os.unlink", "app"], "search-terms": ["test_auth_transactions", "pytest", "FastAPI", "Transaction CRUD", "JWT auth", "test client", "transactions", "auth", "analytics", "test setup", "DB patching"], "state": 2, "file_id": 17, "knowledge_revision": 52, "git_revision": "", "ctags": [{"_type": "tag", "name": "clear_db", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def clear_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^client = TestClient(app)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_jwt_token", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def get_jwt_token(email=\"testuser@example.com\", password=\"StrongPassword!9\"):$/", "language": "Python", "kind": "function", "signature": "(email=\"testuser@example.com\", password=\"StrongPassword!9\")"}, {"_type": "tag", "name": "login_user", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def login_user(email=\"testuser@example.com\", password=\"StrongPassword!9\"):$/", "language": "Python", "kind": "function", "signature": "(email=\"testuser@example.com\", password=\"StrongPassword!9\")"}, {"_type": "tag", "name": "register_user", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def register_user(email=\"testuser@example.com\", password=\"StrongPassword!9\"):$/", "language": "Python", "kind": "function", "signature": "(email=\"testuser@example.com\", password=\"StrongPassword!9\")"}, {"_type": "tag", "name": "run_around_tests", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def run_around_tests():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_analytics_summary", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_analytics_summary():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_db_env", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_db_env(monkeypatch):$/", "language": "Python", "kind": "function", "signature": "(monkeypatch)"}, {"_type": "tag", "name": "test_docs_usage", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_docs_usage():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_health_check", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_jwt_required_all_transactions_endpoints", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_jwt_required_all_transactions_endpoints(route):$/", "language": "Python", "kind": "function", "signature": "(route)"}, {"_type": "tag", "name": "test_login_invalid_password", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_login_invalid_password():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_login_nonexistent_email", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_login_nonexistent_email():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_login_success", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_login_success():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_protected_endpoint_requires_jwt", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_protected_endpoint_requires_jwt():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_register_duplicate_email", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_register_duplicate_email():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_register_success", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_register_success():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_transaction_delete_missing", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_transaction_delete_missing():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_transaction_update_missing", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_transaction_update_missing():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_transactions_crud_lifecycle", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_transactions_crud_lifecycle():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_validation_error_reporting", "path": "/home/kavia/workspace/code-generation/finance-tracker-and-budgeting-app-594b2fca/finance_tracker_backend/tests/test_auth_transactions.py", "pattern": "/^def test_validation_error_reporting():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "830651fbc572eec1923cc682dfaf0150", "format-version": 4, "code-base-name": "finance_tracker_backend", "filename": "finance_tracker_backend/tests/test_auth_transactions.py", "fields": [{"name": "client = TestClient(app)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"52": ""}]}